const dictionary = {
    en: {
        nav_home: "Home", nav_why: "Why Thailand",
        nav_hotels: "Hotels", nav_pet: "Pet's Picks", nav_hannah: "Hannah's Picks",
        nav_faq: "FAQ", nav_rsvp: "RSVP",
        nav_events: "Schedule",
        schedule_welcome_title: "To Our Family & Friends",
        schedule_welcome_text: "We are so incredibly excited that you are traveling so far to celebrate with us. Chiang Mai is a place that holds so much of our hearts, and having you all here with us means the world. We appreciate the time, distance, and effort you've taken to be part of our story.",
        event1_title: "Welcome Late Lunch: Moo Krata",
        event2_title: "The Wedding Ceremony & Reception",
        event3_title: "Goodbye Brunch"
    },
    th: {
        nav_home: "à¸«à¸™à¹‰à¸²à¹à¸£à¸", nav_why: "à¸—à¸³à¹„à¸¡à¸•à¹‰à¸­à¸‡à¹„à¸—à¸¢",
        nav_hotels: "à¸—à¸µà¹ˆà¸à¸±à¸", nav_pet: "à¸¡à¸¸à¸¡à¸‚à¸­à¸‡à¹€à¸à¸Šà¸£", nav_hannah: "à¸¡à¸¸à¸¡à¸‚à¸­à¸‡à¸®à¸±à¸™à¸™à¸²à¸«à¹Œ",
        nav_faq: "à¸„à¸³à¸–à¸²à¸¡", nav_rsvp: "à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™",
        nav_events: "à¸à¸³à¸«à¸™à¸”à¸à¸²à¸£",
        schedule_welcome_title: "à¸–à¸¶à¸‡à¸„à¸£à¸­à¸šà¸„à¸£à¸±à¸§à¹à¸¥à¸°à¹€à¸à¸·à¹ˆà¸­à¸™à¸—à¸µà¹ˆà¸£à¸±à¸à¸—à¸¸à¸à¸—à¹ˆà¸²à¸™",
        schedule_welcome_text: "à¹€à¸£à¸²à¸£à¸¹à¹‰à¸ªà¸¶à¸à¸•à¸·à¹ˆà¸™à¹€à¸•à¹‰à¸™à¹à¸¥à¸°à¸”à¸µà¹ƒà¸ˆà¹€à¸›à¹‡à¸™à¸­à¸¢à¹ˆà¸²à¸‡à¸¢à¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸„à¸¸à¸“à¹€à¸”à¸´à¸™à¸—à¸²à¸‡à¸¡à¸²à¹„à¸à¸¥à¹€à¸à¸·à¹ˆà¸­à¸¡à¸²à¸£à¹ˆà¸§à¸¡à¸‰à¸¥à¸­à¸‡à¸à¸±à¸šà¹€à¸£à¸² à¹€à¸Šà¸µà¸¢à¸‡à¹ƒà¸«à¸¡à¹ˆà¹€à¸›à¹‡à¸™à¹€à¸¡à¸·à¸­à¸‡à¸—à¸µà¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢à¸•à¹ˆà¸­à¹ƒà¸ˆà¹€à¸£à¸²à¸—à¸±à¹‰à¸‡à¸„à¸¹à¹ˆà¸¡à¸²à¸ à¹à¸¥à¸°à¸à¸²à¸£à¸—à¸µà¹ˆà¸¡à¸µà¸—à¸¸à¸à¸„à¸™à¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆà¸™à¸µà¹ˆà¸à¸±à¸šà¹€à¸£à¸²à¸¡à¸µà¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢à¸—à¸µà¹ˆà¸ªà¸¸à¸”à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸£à¸² à¸‚à¸­à¸šà¸„à¸¸à¸“à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸§à¸¥à¸² à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸à¸¢à¸²à¸¢à¸²à¸¡à¹ƒà¸™à¸à¸²à¸£à¹€à¸”à¸´à¸™à¸—à¸²à¸‡à¹€à¸à¸·à¹ˆà¸­à¸¡à¸²à¹€à¸›à¹‡à¸™à¸ªà¹ˆà¸§à¸™à¸«à¸™à¸¶à¹ˆà¸‡à¹ƒà¸™à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸£à¸²à¸§à¸‚à¸­à¸‡à¹€à¸£à¸²",
        event1_title: "à¹€à¸¥à¸µà¹‰à¸¢à¸‡à¸•à¹‰à¸­à¸™à¸£à¸±à¸šà¸¡à¸·à¹‰à¸­à¸šà¹ˆà¸²à¸¢: à¸«à¸¡à¸¹à¸à¸£à¸°à¸—à¸°",
        event2_title: "à¸à¸´à¸˜à¸µà¸‰à¸¥à¸­à¸‡à¸¡à¸‡à¸„à¸¥à¸ªà¸¡à¸£à¸ªà¹à¸¥à¸°à¸‡à¸²à¸™à¹€à¸¥à¸µà¹‰à¸¢à¸‡à¸‰à¸¥à¸­à¸‡",
        event3_title: "à¸¡à¸·à¹‰à¸­à¸ªà¸²à¸¢à¸­à¸³à¸¥à¸²"
    },
    ko: {
        nav_home: "í™ˆ", nav_why: "ì™œ íƒœêµ­ì¸ê°€ìš”", nav_events: "ì¼ì •",
        nav_hotels: "í˜¸í…”", nav_pet: "í«ì˜ ì¶”ì²œ", nav_hannah: "í•œë‚˜ì˜ ì¶”ì²œ",
        nav_faq: "FAQ", nav_rsvp: "ì°¸ì„ì—¬ë¶€",
        nav_events: "ì¼ì •",
        schedule_welcome_title: "ì‚¬ë‘í•˜ëŠ” ê°€ì¡±ê³¼ ì¹œêµ¬ë“¤ì—ê²Œ",
        schedule_welcome_text: "ì €í¬ì™€ í•¨ê»˜ ì¶•í•˜í•´ ì£¼ì‹œê¸° ìœ„í•´ ë©€ë¦¬ íƒœêµ­ê¹Œì§€ ì™€ ì£¼ì…”ì„œ ì§„ì‹¬ìœ¼ë¡œ ê¸°ì˜ê³  ê°ì‚¬í•©ë‹ˆë‹¤. ì¹˜ì•™ë§ˆì´ëŠ” ì €í¬ ë‘ ì‚¬ëŒì˜ ë§ˆìŒì†ì— íŠ¹ë³„í•œ ì˜ë¯¸ê°€ ìˆëŠ” ê³³ì´ë©°, ì´ê³³ì—ì„œ ì—¬ëŸ¬ë¶„ê³¼ í•¨ê»˜í•  ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì´ ì €í¬ì—ê² ë¬´ì—‡ë³´ë‹¤ ì†Œì¤‘í•©ë‹ˆë‹¤. ì €í¬ì˜ ì†Œì¤‘í•œ ìˆœê°„ì— í•¨ê»˜í•˜ê¸° ìœ„í•´ ë¨¼ ê¸¸ì„ ì™€ ì£¼ì‹  ì—¬ëŸ¬ë¶„ì˜ ì •ì„±ê³¼ ì‚¬ë‘ì— ê¹Šì´ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤.",
        event1_title: "ì›°ì»´ ëŸ°ì¹˜: ë¬´ì¹´íƒ€ (íƒœêµ­ì‹ ë°”ë² í)",
        event2_title: "ê²°í˜¼ì‹ ë° í”¼ë¡œì—°",
        event3_title: "êµ¿ë°”ì´ ë¸ŒëŸ°ì¹˜"
    }

};

const globalHeader = `
    <nav class="nav-container">
        <div class="lang-switcher">
            <button id="btn-en" class="lang-btn" onclick="updateLanguage('en')">EN</button>
            <button id="btn-th" class="lang-btn" onclick="updateLanguage('th')">TH</button>
            <button id="btn-ko" class="lang-btn" onclick="updateLanguage('ko')">KO</button>
        </div>
        <a href="why.html" class="nav-logo">P & H</a>
        <button class="hamburger" id="menuToggle"><span></span><span></span><span></span></button>
    </nav>
    <div class="menu-overlay" id="menu">
        <a href="why.html" data-i18n="nav_why">Why Thailand?</a>
        <a href="schedule.html" data-i18n="nav_events">Schedule</a>
        <a href="hotels.html" data-i18n="nav_hotels">Hotels</a>
        <a href="recommendation-corner.html" data-i18n="nav-recommendations">Our Recs</a>
        <a href="faq.html" data-i18n="nav_faq">Travel FAQ</a>
        <a href="rsvp.html" data-i18n="nav_rsvp">RSVP</a>
    </div>
`;

const globalFooter = `
    <footer class="footer-container">
        <div class="footer-divider"></div>
        <p class="footer-names">Pet & Hannah</p>
        <p class="footer-date">12 . 11 . 2026 â€” CHIANG MAI</p>
        <div class="footer-icons"><span>ğŸ˜</span><span>ğŸŒ¿</span><span>ğŸŒ¸</span></div>
    </footer>
`;

function toggleMenu() {
    const menu = document.getElementById('menu');
    if (!menu) return;
    const isHidden = window.getComputedStyle(menu).display === 'none';
    menu.style.display = isHidden ? 'flex' : 'none';
}

function updateLanguage(lang) {
    localStorage.setItem('wedding_lang', lang);
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (dictionary[lang][key]) el.innerText = dictionary[lang][key];
    });
    document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(`btn-${lang}`)?.classList.add('active');
}

function init() {
    // 1. Check Auth (Allow index.html without auth)
    const isAuth = localStorage.getItem('wedding_auth');
    const path = window.location.pathname;
    const isIndex = path.endsWith('index.html') || path === '/' || path.endsWith('/and-hannah/');

    if (!isAuth && !isIndex) {
        window.location.href = 'index.html';
        return;
    }

    // 2. Inject HTML
    const hPlace = document.getElementById('header-placeholder');
    const fPlace = document.getElementById('footer-placeholder');
    if (hPlace) hPlace.innerHTML = globalHeader;
    if (fPlace) fPlace.innerHTML = globalFooter;

    // 3. Setup Lang & Menu
    const savedLang = localStorage.getItem('wedding_lang') || 'en';
    updateLanguage(savedLang);

    const btn = document.getElementById('menuToggle');
    if (btn) btn.onclick = toggleMenu;
}

window.onload = init;